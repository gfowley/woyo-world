<html>
  <head>
    <meta charset='utf-8'>
    <meta content='chrome=1' http-equiv='X-UA-Compatible'>
    <meta content='Woyo World : World of Your Own' name='description'>
    <link href='stylesheets/stylesheet.css' media='screen' rel='stylesheet' type='text/css'>
    <title>Woyo World</title>
  </head>
  <body>
    <div class='outer' id='header_wrap'>
      <header class='inner'>
        <a href='https://github.com/iqeo/woyo-world' id='forkme_banner'>View on GitHub</a>
        <h1 id='project_title'>Woyo World</h1>
        <h2 id='project_tagline'>World of Your Own</h2>
      </header>
    </div>
    <div class='outer' id='main_content_wrap'>
      <section class='inner' id='main_content'>
        <div>
          <h2>WOYO : World of Your Own</h2>
          <p>This gem woyo-world is a Ruby-based DSL (Domain Specific Language) for creating and interacting with a virtual world. A world is comprised of locations to visit, and ways to go between locations.</p>
          <div>
            <h2>World</h2>
            <p>A world is comprised of attributes and objects, including locations, items, characters, etc..</p>
            <div>
              <h3>Attributes</h3>
              <p>A world has attributes that describe and define it's operation.</p>
              <div>
                <pre><code>name 'Small'&#x000A;description 'A small world.'&#x000A;start :home</code></pre>
              </div>
              <p>Attributes may be accessed from the world.</p>
              <p>The 'name' attribute is to be presented to the user</p>
              <div>
                <pre><code>world.name #=> 'Small'</code></pre>
              </div>
              <p>The 'description' attrbute is to be presented to the user</p>
              <div>
                <pre><code>world.description #=> 'A small world.'</code></pre>
              </div>
              <p>The 'start' attribute refers to the location the user will start at in the world...</p>
              <div>
                <pre><code>world.start #=> :home</code></pre>
              </div>
              <p>...in this case 'home'.</p>
            </div>
            <p>The most interesting worlds contain locations to visit.</p>
          </div>
          <div>
            <h2>Locations</h2>
            <p>A location is a place to visit in a world.</p>
            <div>
              <h3>From humble beginnings</h3>
              <p>A single location</p>
              <div>
                <pre><code>location :home do&#x000A;  name 'My Home'&#x000A;  description 'This old house.'&#x000A;end</code></pre>
              </div>
              <p>Locations have an identifier (in this case :home) that is unique within the world.</p>
              <p>A location may be referenced like this...</p>
              <div>
                <pre><code>home = world.locations[:home]</code></pre>
              </div>
              <p>...or this...</p>
              <div>
                <pre><code>home = world.location :home</code></pre>
              </div>
              <p>To get information about the location...</p>
              <div>
                <pre><code>home.id #=> :home</code></pre>
              </div>
              <div>
                <pre><code>home.name #=> 'My Home'</code></pre>
              </div>
              <div>
                <pre><code>home.description #=> 'This old house.'</code></pre>
              </div>
              <p>This is a nice old house, but let's make some changes to it...</p>
            </div>
            <div>
              <h3>Change begins at home</h3>
              <p>Let's make some changes to this location.</p>
              <div>
                <pre><code>location :home do&#x000A;  description 'Sweet home.'&#x000A;end</code></pre>
              </div>
              <p>The new description replaces the old one.</p>
              <p>Now our home looks like this...</p>
              <div>
                <pre><code>home.name #=> 'My Home'</code></pre>
              </div>
              <div>
                <pre><code>home.description #=> 'Sweet home.'</code></pre>
              </div>
              <p>No matter how sweet, this little world is not very interesting...</p>
              <div>
                <pre><code>world.locations.count #=> 1</code></pre>
              </div>
              <p>Let's expand our horizons...</p>
            </div>
            <div>
              <h3>Expandng horizons</h3>
              <p>Add a location to our world</p>
              <div>
                <pre><code>location :garden do&#x000A;  name 'Garden'&#x000A;  description 'A green leafy place.'&#x000A;end</code></pre>
              </div>
              <p>Now our world is a little more interesting...</p>
              <div>
                <pre><code>world.locations.count #=> 2</code></pre>
              </div>
              <div>
                <pre><code>garden = world.location :garden</code></pre>
              </div>
              <p>This seems like a nice garden...</p>
              <div>
                <pre><code>garden.id #=> :garden</code></pre>
              </div>
              <div>
                <pre><code>garden.name #=> 'Garden'</code></pre>
              </div>
              <div>
                <pre><code>garden.description #=> 'A green leafy place.'</code></pre>
              </div>
              <p>We'd like to visit this garden, but there's no way, really...</p>
              <div>
                <pre><code>home.ways #=> {}</code></pre>
              </div>
              <div>
                <pre><code>garden.ways #=> {}</code></pre>
              </div>
              <p>To go from location to location we need Ways</p>
            </div>
          </div>
          <div>
            <h2>Ways</h2>
            <p>A way is a directional path between locations.</p>
            <div>
              <h3>From here to there</h3>
              <p>A way is defined within a location.</p>
              <div>
                <pre><code>location :here do&#x000A;  way :road do&#x000A;    to :there&#x000A;    description 'A short road'&#x000A;    going       'Takes a long time'&#x000A;  end&#x000A;end</code></pre>
              </div>
              <p>Ways have an identifier (in this case :road) that is unique within that location.</p>
              <p>A way may be referenced like this...</p>
              <div>
                <pre><code>here = world.locations[:here]</code></pre>
              </div>
              <div>
                <pre><code>way = here.ways[:road]</code></pre>
              </div>
              <p>...or this...</p>
              <div>
                <pre><code>here = world.location :here</code></pre>
              </div>
              <div>
                <pre><code>way = here.way :road</code></pre>
              </div>
              <p>The way's attributes include a description that may be included in location representation to the user.</p>
              <div>
                <pre><code>way.description #=> 'A short road'</code></pre>
              </div>
              <p>The location the way is defined within is the location the way is 'from'.</p>
              <div>
                <pre><code>way.from.id #=> :here</code></pre>
              </div>
              <p>Ways connect 'to' a location (in this case :there). This location is created if it does not already exist.</p>
              <div>
                <pre><code>way.to.id #=> :there</code></pre>
              </div>
            </div>
            <div>
              <h3>Going a way</h3>
              <p>Ways connect locations so that a user can move about in your world. Usually upon user input, the user goes a way from location to location. An optional description of the 'going' may be presented.</p>
              <div>
                <pre><code>location :room do&#x000A;  way :stairs do&#x000A;    to :cellar&#x000A;    description 'Rickety stairs lead down into darkness.'&#x000A;    going       'Creaky steps lead uncertainly downwards...'&#x000A;  end&#x000A;end&#x000A;location :cellar do&#x000A;  description 'Dark and damp, as expected.'&#x000A;end</code></pre>
              </div>
              <p>Accessing the location and way...</p>
              <div>
                <pre><code>room = world.location :room</code></pre>
              </div>
              <div>
                <pre><code>stairs = room.way :stairs</code></pre>
              </div>
              <p>When we try to 'go' a way, the result describes the attempt.</p>
              <div>
                <pre><code>attempt = stairs.go #=> { go: true, going: 'Creaky steps lead uncertainly downwards...' }</code></pre>
              </div>
              <p>Whether successful or not (true in this case)...</p>
              <div>
                <pre><code>attempt[:go] #=> true</code></pre>
              </div>
              <p>And a description of the attempt...</p>
              <div>
                <pre><code>attempt[:going] #=> 'Creaky steps lead uncertainly downwards...'</code></pre>
              </div>
            </div>
            <div>
              <h3>On the way</h3>
              <p>Ways may be open or closed, optionally with descriptions for each state. A user cannot go a closed way, and an alternative 'going' description may be presented if attempted.</p>
              <div>
                <pre><code>location :room do&#x000A;  way :stairs do&#x000A;    to :cellar&#x000A;    description   open:   'Rickety stairs lead down into darkness.',&#x000A;                  closed: 'Broken stairs end in darkness.'&#x000A;    going         open:   'Creaky steps lead uncertainly downwards...',&#x000A;                  closed: 'The dangerous stairs are impassable.'&#x000A;  end&#x000A;end&#x000A;location :cellar do&#x000A;  description 'Dark and damp, as expected.'&#x000A;end</code></pre>
              </div>
              <p>Accessing the location and way...</p>
              <div>
                <pre><code>room = world.location :room</code></pre>
              </div>
              <div>
                <pre><code>stairs = room.way :stairs</code></pre>
              </div>
              <p>Ways that go 'to' a location are open by default.</p>
              <div>
                <pre><code>stairs.open? #=> true</code></pre>
              </div>
              <p>With an appropriate description.</p>
              <div>
                <pre><code>stairs.description #=> 'Rickety stairs lead down into darkness.'</code></pre>
              </div>
              <p>Going an open way succeeds.</p>
              <div>
                <pre><code>attempt = stairs.go #=> { go: true, going: 'Creaky steps lead uncertainly downwards...' }</code></pre>
              </div>
              <div>
                <pre><code>attempt[:go] #=> true</code></pre>
              </div>
              <div>
                <pre><code>attempt[:going] #=> 'Creaky steps lead uncertainly downwards...'</code></pre>
              </div>
              <p>A way may be closed.</p>
              <div>
                <pre><code>stairs.close!</code></pre>
              </div>
              <div>
                <pre><code>stairs.closed? #=> true</code></pre>
              </div>
              <p>The way has an appropriate description.</p>
              <div>
                <pre><code>stairs.description #=> 'Broken stairs end in darkness.'</code></pre>
              </div>
              <p>Going a closed way fails.</p>
              <div>
                <pre><code>attempt = stairs.go #=> { go: false, going: 'The dangerous stairs are impassable.' }</code></pre>
              </div>
              <div>
                <pre><code>attempt[:go] #=> false</code></pre>
              </div>
              <div>
                <pre><code>attempt[:going] #=> 'The dangerous stairs are impassable.'</code></pre>
              </div>
            </div>
          </div>
          <div>
            <h2>Items</h2>
            <div>
              <h3>Stuff here</h3>
            </div>
          </div>
          <div>
            <h2>Attributes</h2>
            <div>
              <h3>Things change</h3>
              <p>Attribute values may be dynamic, their value determined by a Ruby code block. The value of the last expression in the block is the value assigned to the attribte.</p>
              <div>
                <pre><code>item :clock do&#x000A;  attribute :time do&#x000A;    Time.now.to_s&#x000A;  end&#x000A;end</code></pre>
              </div>
              <p>'Time.now.to_s' is a Ruby expression that returns the current time in human readable string. Since it is the last (only) expression in the code block, it's value will be assigned to the attribute ':time'.</p>
              <div>
                <pre><code>clock = world.item :clock</code></pre>
              </div>
              <div>
                <pre><code>clock.time #=> Time.now.to_s</code></pre>
              </div>
              <p>The code block will be evaluated each time the attribute is accessed, returning the current time. Let's wait a second and check the time again.</p>
              <div>
                <pre><code>sleep 1</code></pre>
              </div>
              <div>
                <pre><code>clock.time #=> Time.now.to_s</code></pre>
              </div>
            </div>
            <div>
              <h3>These things</h3>
              <p>A dynamic attribute can access other attributes of the same object.</p>
              <p>A simple calculator.</p>
              <div>
                <pre><code>item :calculator do&#x000A;  attribute a: 1, b: 2&#x000A;  attribute :sum do&#x000A;    a + b&#x000A;  end&#x000A;end</code></pre>
              </div>
              <p>Attribute 'sum' accesses attributes 'a' and 'b' and adds them.</p>
              <div>
                <pre><code>calculator = world.item :calculator</code></pre>
              </div>
              <div>
                <pre><code>calculator.sum #=> 3</code></pre>
              </div>
              <p>Being a dynamic attribute, changes to the related attributes affect the result.</p>
              <div>
                <pre><code>calculator.a = 4</code></pre>
              </div>
              <div>
                <pre><code>calculator.b = 5</code></pre>
              </div>
              <div>
                <pre><code>calculator.sum #=> 9</code></pre>
              </div>
            </div>
            <div>
              <h3>Those things</h3>
              <p>Dynamic attributes provide a mechanism for one object to affect another. The Ruby code block may simply refer to an attribute of another object.</p>
              <div>
                <pre><code>item :bulb do&#x000A;  attribute color: 'red'&#x000A;end&#x000A;item :lamp do    &#x000A;  attribute :light do&#x000A;    ( world.item :bulb ).color&#x000A;  end&#x000A;end</code></pre>
              </div>
              <p>The lamp's light depends on the bulb color.</p>
              <div>
                <pre><code>lamp = world.item :lamp</code></pre>
              </div>
              <div>
                <pre><code>lamp.light #=> 'red'</code></pre>
              </div>
              <p>Let's change the bulb.</p>
              <div>
                <pre><code>bulb = world.item :bulb</code></pre>
              </div>
              <div>
                <pre><code>bulb.color = 'green'</code></pre>
              </div>
              <p>New we see the lamp in a new light.</p>
              <div>
                <pre><code>lamp.light #=> 'green'</code></pre>
              </div>
            </div>
            <p>All things... to access attributes of other objects, see 'Context'.</p>
            <p>Being Ruby code, dynamic attributes could be used to make changes to other world objects, attributes, etc.., even to execute any arbitrary Ruby code. Don't do it, this way lies madness.</p>
            <p>Dynamic attributes are intended only to provide a dynamic value to a attribute, not to change other attributes or world objects. Another mechanism: 'Actions', is intended to modify the world.</p>
          </div>
          <div>
            <h2>Context</h2>
            <p>Other objects may be referred to in different ways.</p>
            <div>
              <h3>World</h3>
            </div>
            <div>
              <h3>Location</h3>
            </div>
            <div>
              <h3>Context</h3>
            </div>
          </div>
          <div>
            <h2>Actions</h2>
            <p>World objects may have actions that can be invoked, usually via user interaction.</p>
            <p>Actions change the state of the world, usually by changing the value of attributes on world objects</p>
            <div>
              <h3>Making changes</h3>
              <p>Actions may be defined for a world object, in this case, an item.</p>
              <div>
                <pre><code>location :here do&#x000A;  item :thing do&#x000A;    name 'Thing?'&#x000A;    action :one do&#x000A;      name 'Thing One'&#x000A;    end&#x000A;    action :two do&#x000A;      name 'Thing Two'&#x000A;    end&#x000A;  end&#x000A;end</code></pre>
              </div>
              <p>Initially the name is as defined</p>
              <div>
                <pre><code>location = world.location :here</code></pre>
              </div>
              <div>
                <pre><code>thing = location.item :thing #=> world.locations[:here].items[:thing]</code></pre>
              </div>
              <div>
                <pre><code>thing.name #=> 'Thing?'</code></pre>
              </div>
              <p>Invoking action 'one', changes the name.</p>
              <div>
                <pre><code>thing.one</code></pre>
              </div>
              <div>
                <pre><code>thing.name #=> 'Thing One'</code></pre>
              </div>
              <p>Invoking action 'two', changes the name again.</p>
              <div>
                <pre><code>thing.two</code></pre>
              </div>
              <div>
                <pre><code>thing.name #=> 'Thing Two'</code></pre>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </body>
</html>
